<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Interactive VR Periodic Table</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>
<body>
    <a-scene vr-mode-ui="enabled: true" background="color: #111">
        <!-- Assets -->
        <a-assets>
            <!-- Шаблон для інтерактивних плиток-елементів -->
            <a-mixin id="element-tile"
                     geometry="primitive: box; width: 1; height: 1; depth: 0.2"
                     animation__mouseenter="property: position.z; to: 0.2; startEvents: mouseenter; dur: 200"
                     animation__mouseleave="property: position.z; to: 0; startEvents: mouseleave; dur: 200">
            </a-mixin>
        </a-assets>
        
        <!-- Оточення -->
        <a-sky color="#202020"></a-sky>
        <a-light type="ambient" color="#AAA"></a-light>
        <a-light type="directional" position="-1 1 2" intensity="0.8"></a-light>
        
        <!-- Контейнер для таблиці. Ми його трохи перемістили -->
        <a-entity id="periodic-table-container" position="-9 5 -12" periodic-table-generator>
            <!-- JavaScript створить тут плитки-елементи -->
        </a-entity>
        
        <!-- ========================================================== -->
        <!-- НОВА ІНФОРМАЦІЙНА КАРТКА (спочатку невидима) -->
        <!-- ========================================================== -->
        <a-entity id="info-card" position="3.5 3.5 -9" visible="false">
            <!-- Напівпрозорий фон для картки -->
            <a-plane id="info-bg" width="4.5" height="4" color="#222" material="opacity: 0.8"></a-plane>
            
            <!-- Великий номер елемента у кутку -->
            <a-text id="info-number" value="1" color="#FFF" width="10" align="left"
                    position="-1.8 1.5 0.1"></a-text>
            
            <!-- Великий символ елемента -->
            <a-text id="info-symbol" value="H" color="#FFF" width="20" align="center"
                    position="0 0.5 0.1"></a-text>

            <!-- Назва елемента -->
            <a-text id="info-name" value="Hydrogen" color="#FFF" width="6" align="center"
                    position="0 -0.5 0.1"></a-text>

            <!-- Інша інформація (вирівняна по лівому краю) -->
            <a-text id="info-details" value="Details" color="#DDD" width="5" align="left" wrap-count="40"
                    position="-1.8 -1.3 0.1"></a-text>
        </a-entity>
        
        <!-- Камера з курсором -->
        <a-camera position="0 1.6 0">
            <a-cursor raycaster="objects: .clickable"></a-cursor>
        </a-camera>
    </a-scene>
    
    <script>
        // --- РОЗШИРЕНІ ДАНІ ПРО ЕЛЕМЕНТИ ---
        const elementsData = [
            // number, symbol, name, mass, group, x, y, boiling_point_k, electron_config
            { number: 1, symbol: 'H', name: 'Hydrogen', mass: 1.008, group: 'nonmetal', x: 0, y: 0, boiling_point_k: 20.28, electron_config: '1s¹' },
            { number: 2, symbol: 'He', name: 'Helium', mass: 4.0026, group: 'noble-gas', x: 17, y: 0, boiling_point_k: 4.22, electron_config: '1s²' },
            { number: 3, symbol: 'Li', name: 'Lithium', mass: 6.94, group: 'alkali-metal', x: 0, y: 1, boiling_point_k: 1615, electron_config: '[He] 2s¹' },
            { number: 4, symbol: 'Be', name: 'Beryllium', mass: 9.0122, group: 'alkaline-earth-metal', x: 1, y: 1, boiling_point_k: 2742, electron_config: '[He] 2s²' },
            { number: 5, symbol: 'B', name: 'Boron', mass: 10.81, group: 'metalloid', x: 12, y: 1, boiling_point_k: 4200, electron_config: '[He] 2s² 2p¹' },
            { number: 6, symbol: 'C', name: 'Carbon', mass: 12.011, group: 'nonmetal', x: 13, y: 1, boiling_point_k: 5100, electron_config: '[He] 2s² 2p²' },
            { number: 7, symbol: 'N', name: 'Nitrogen', mass: 14.007, group: 'nonmetal', x: 14, y: 1, boiling_point_k: 77.36, electron_config: '[He] 2s² 2p³' },
            { number: 8, symbol: 'O', name: 'Oxygen', mass: 15.999, group: 'nonmetal', x: 15, y: 1, boiling_point_k: 90.20, electron_config: '[He] 2s² 2p⁴' },
            { number: 9, symbol: 'F', name: 'Fluorine', mass: 18.998, group: 'halogen', x: 16, y: 1, boiling_point_k: 85.03, electron_config: '[He] 2s² 2p⁵' },
            { number: 10, symbol: 'Ne', name: 'Neon', mass: 20.180, group: 'noble-gas', x: 17, y: 1, boiling_point_k: 27.07, electron_config: '[He] 2s² 2p⁶' },
            { number: 11, symbol: 'Na', name: 'Sodium', mass: 22.990, group: 'alkali-metal', x: 0, y: 2, boiling_point_k: 1156, electron_config: '[Ne] 3s¹' },
            { number: 12, symbol: 'Mg', name: 'Magnesium', mass: 24.305, group: 'alkaline-earth-metal', x: 1, y: 2, boiling_point_k: 1363, electron_config: '[Ne] 3s²' },
            { number: 13, symbol: 'Al', name: 'Aluminum', mass: 26.982, group: 'post-transition-metal', x: 12, y: 2, boiling_point_k: 2792, electron_config: '[Ne] 3s² 3p¹' },
            { number: 14, symbol: 'Si', name: 'Silicon', mass: 28.085, group: 'metalloid', x: 13, y: 2, boiling_point_k: 3538, electron_config: '[Ne] 3s² 3p²' },
            { number: 15, symbol: 'P', name: 'Phosphorus', mass: 30.974, group: 'nonmetal', x: 14, y: 2, boiling_point_k: 550, electron_config: '[Ne] 3s² 3p³' },
            { number: 16, symbol: 'S', name: 'Sulfur', mass: 32.06, group: 'nonmetal', x: 15, y: 2, boiling_point_k: 717.8, electron_config: '[Ne] 3s² 3p⁴' },
            { number: 17, symbol: 'Cl', name: 'Chlorine', mass: 35.45, group: 'halogen', x: 16, y: 2, boiling_point_k: 239.11, electron_config: '[Ne] 3s² 3p⁵' },
            { number: 18, symbol: 'Ar', name: 'Argon', mass: 39.948, group: 'noble-gas', x: 17, y: 2, boiling_point_k: 87.30, electron_config: '[Ne] 3s² 3p⁶' }
        ];

        // --- ОНОВЛЕНА КОЛЬОРОВА СХЕМА (більш стандартна) ---
        const groupColors = {
            'nonmetal': '#90EE90', // Світло-зелений
            'noble-gas': '#C8A2C8', // Бузковий
            'alkali-metal': '#FF6347', // Томатний
            'alkaline-earth-metal': '#FFD700', // Золотий
            'metalloid': '#A52A2A', // Коричневий
            'halogen': '#40E0D0', // Бірюзовий
            'post-transition-metal': '#B0C4DE' // Світло-сталевий
        };
        
        // --- ЛОГІКА СТВОРЕННЯ ТАБЛИЦІ (компонент A-Frame) ---
        AFRAME.registerComponent('periodic-table-generator', {
            init: function() {
                const tableContainer = this.el;

                // Отримуємо доступ до елементів інформаційної картки
                const infoCard = document.getElementById('info-card');
                const infoNumber = document.getElementById('info-number');
                const infoSymbol = document.getElementById('info-symbol');
                const infoName = document.getElementById('info-name');
                const infoDetails = document.getElementById('info-details');

                elementsData.forEach(elementData => {
                    const tile = document.createElement('a-entity');
                    tile.setAttribute('mixin', 'element-tile');
                    tile.classList.add('clickable');

                    const xPos = elementData.x * 1.1; // Зменшили відстань
                    const yPos = -elementData.y * 1.1;
                    tile.setAttribute('position', `${xPos} ${yPos} 0`);
                    
                    tile.setAttribute('material', 'color', groupColors[elementData.group] || '#FFF');
                    
                    // Додаємо текст-символ на саму плитку
                    const symbolText = document.createElement('a-text');
                    symbolText.setAttribute('value', elementData.symbol);
                    symbolText.setAttribute('align', 'center');
                    symbolText.setAttribute('position', '0 0 0.15');
                    symbolText.setAttribute('color', '#000');
                    symbolText.setAttribute('width', 5);
                    tile.appendChild(symbolText);
                    
                    // ==========================================================
                    // НОВА ЛОГІКА ВЗАЄМОДІЇ (НАВЕДЕННЯ ЗАМІСТЬ КЛІКУ)
                    // ==========================================================
                    tile.addEventListener('mouseenter', function() {
                        // 1. Оновлюємо інформацію на картці
                        infoNumber.setAttribute('value', elementData.number);
                        infoSymbol.setAttribute('value', elementData.symbol);
                        infoName.setAttribute('value', elementData.name);
                        
                        // Розраховуємо температуру в Цельсіях
                        const tempCelsius = (elementData.boiling_point_k - 273.15).toFixed(2);
                        
                        // Формуємо рядок з деталями
                        const detailsText = 
                            `Atomic Mass: ${elementData.mass}\n` +
                            `Group: ${elementData.group.replace(/-/g, ' ')}\n\n` +
                            `Boiling Point: ${elementData.boiling_point_k} K / ${tempCelsius} °C\n\n` +
                            `Electron Config: ${elementData.electron_config}`;
                        
                        infoDetails.setAttribute('value', detailsText);
                        
                        // 2. Робимо картку видимою
                        infoCard.setAttribute('visible', true);
                    });

                    tile.addEventListener('mouseleave', function() {
                        // 3. Ховаємо картку, коли курсор йде з елемента
                        infoCard.setAttribute('visible', false);
                    });
                    
                    tableContainer.appendChild(tile);
                });
            }
        });
    </script>
</body>
</html>
