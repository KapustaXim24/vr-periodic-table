<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>VR Periodic Table</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- Ми не будемо завантажувати TensorFlow, щоб не ускладнювати, а імітуємо його в JS -->
</head>
<body>
    <a-scene vr-mode-ui="enabled: true" background="color: #0c0c0c">
        <!-- Assets - ресурси та шаблони, які ми будемо використовувати -->
        <a-assets>
            <!-- Це "міксин" - шаблон для наших інтерактивних кубиків.
                 Він додає анімацію збільшення при наведенні курсору. -->
            <a-mixin id="element-box"
                     geometry="primitive: box; width: 1; height: 1; depth: 1"
                     animation__mouseenter="property: scale; to: 1.2 1.2 1.2; startEvents: mouseenter; dur: 200"
                     animation__mouseleave="property: scale; to: 1 1 1; startEvents: mouseleave; dur: 200">
            </a-mixin>
        </a-assets>
        
        <!-- Оточення: небо та світло -->
        <a-sky color="#232323"></a-sky>
        <a-light type="ambient" color="#888"></a-light>
        <a-light type="directional" position="-1 1 2" intensity="0.8"></a-light>
        
        <!-- Контейнер для нашої періодичної таблиці -->
        <a-entity id="periodic-table-container" position="-9 4.5 -10" periodic-table-generator>
            <!-- Сюди JavaScript динамічно додасть кубики-елементи -->
        </a-entity>
        
        <!-- Інтерфейс користувача: панель для виводу інформації -->
        <a-entity id="ui-panel" position="0 1.5 -3">
            <!-- Заголовок, який видно одразу -->
            <a-text id="element-title" value="Periodic Table" 
                    position="0 0.8 0" align="center" color="#FFF" width="4">
            </a-text>
            <!-- Текст для інформації про елемент, спочатку порожній -->
            <a-text id="element-info" value="Click on an element to see details" 
                    position="0 0.2 0" align="center" color="#DDD" width="3.5" wrap-count="30">
            </a-text>
            <!-- Текст для "прогнозу" ML, спочатку порожній -->
            <a-text id="ml-prediction" value="" 
                    position="0 -0.4 0" align="center" color="#40E0D0" width="4">
            </a-text>
        </a-entity>
        
        <!-- Камера з курсором -->
        <a-camera position="0 1.6 0">
            <a-cursor raycaster="objects: [mixin~=element-box]"></a-cursor>
        </a-camera>
    </a-scene>
    
    <script>
        // --- ДАНІ ---
        // Уявіть собі Excel-таблицю в JavaScript. Тут ми зберігаємо дані про перші 18 елементів.
        // x, y - це їхні координати в таблиці.
        const elementsData = [
            { number: 1, symbol: 'H', name: 'Hydrogen', mass: 1.008, group: 'nonmetal', x: 0, y: 0 },
            { number: 2, symbol: 'He', name: 'Helium', mass: 4.0026, group: 'noble-gas', x: 17, y: 0 },
            { number: 3, symbol: 'Li', name: 'Lithium', mass: 6.94, group: 'alkali-metal', x: 0, y: 1 },
            { number: 4, symbol: 'Be', name: 'Beryllium', mass: 9.0122, group: 'alkaline-earth-metal', x: 1, y: 1 },
            { number: 5, symbol: 'B', name: 'Boron', mass: 10.81, group: 'metalloid', x: 12, y: 1 },
            { number: 6, symbol: 'C', name: 'Carbon', mass: 12.011, group: 'nonmetal', x: 13, y: 1 },
            { number: 7, symbol: 'N', name: 'Nitrogen', mass: 14.007, group: 'nonmetal', x: 14, y: 1 },
            { number: 8, symbol: 'O', name: 'Oxygen', mass: 15.999, group: 'nonmetal', x: 15, y: 1 },
            { number: 9, symbol: 'F', name: 'Fluorine', mass: 18.998, group: 'halogen', x: 16, y: 1 },
            { number: 10, symbol: 'Ne', name: 'Neon', mass: 20.180, group: 'noble-gas', x: 17, y: 1 },
            { number: 11, symbol: 'Na', name: 'Sodium', mass: 22.990, group: 'alkali-metal', x: 0, y: 2 },
            { number: 12, symbol: 'Mg', name: 'Magnesium', mass: 24.305, group: 'alkaline-earth-metal', x: 1, y: 2 },
            { number: 13, symbol: 'Al', name: 'Aluminum', mass: 26.982, group: 'post-transition-metal', x: 12, y: 2 },
            { number: 14, symbol: 'Si', name: 'Silicon', mass: 28.085, group: 'metalloid', x: 13, y: 2 },
            { number: 15, symbol: 'P', name: 'Phosphorus', mass: 30.974, group: 'nonmetal', x: 14, y: 2 },
            { number: 16, symbol: 'S', name: 'Sulfur', mass: 32.06, group: 'nonmetal', x: 15, y: 2 },
            { number: 17, symbol: 'Cl', name: 'Chlorine', mass: 35.45, group: 'halogen', x: 16, y: 2 },
            { number: 18, symbol: 'Ar', name: 'Argon', mass: 39.948, group: 'noble-gas', x: 17, y: 2 }
        ];

        // Кольори для різних груп елементів (це наш "тренд властивостей")
        const groupColors = {
            'nonmetal': '#F4A460', // Пісочний
            'noble-gas': '#FF69B4', // Рожевий
            'alkali-metal': '#FF4500', // Помаранчево-червоний
            'alkaline-earth-metal': '#FFD700', // Золотий
            'metalloid': '#DA70D6', // Орхідея
            'halogen': '#20B2AA', // Морська хвиля
            'post-transition-metal': '#778899' // Сірий
        };

        // --- ІМІТАЦІЯ МАШИННОГО НАВЧАННЯ ---
        // Це наша "ML модель". Вона бере номер елемента і "прогнозує"
        // його умовну температуру кипіння за простою формулою.
        function predictBoilingPoint(atomicNumber) {
            // Це вигадана формула для демонстрації.
            const predictedValue = (atomicNumber * 25) - (atomicNumber * atomicNumber * 0.5);
            return predictedValue.toFixed(2); // Округлюємо до 2 знаків
        }

        // --- ЛОГІКА СТВОРЕННЯ ТАБЛИЦІ ---
        // Створюємо власний "компонент" для A-Frame.
        AFRAME.registerComponent('periodic-table-generator', {
            init: function() {
                const sceneEl = this.el; // Це наш <a-entity id="periodic-table-container">

                // Проходимо по кожному елементу в наших даних
                elementsData.forEach(element => {
                    // Створюємо новий елемент-кубик
                    const box = document.createElement('a-entity');
                    box.setAttribute('mixin', 'element-box'); // Використовуємо наш шаблон
                    
                    // Задаємо позицію кубика на основі його координат x, y
                    const xPos = element.x * 1.2;
                    const yPos = -element.y * 1.2;
                    box.setAttribute('position', `${xPos} ${yPos} 0`);
                    
                    // Задаємо колір на основі групи елемента
                    box.setAttribute('material', 'color', groupColors[element.group] || '#FFF');
                    
                    // Зберігаємо всі дані про елемент прямо в кубику, щоб потім їх дістати
                    box.dataset.elementInfo = JSON.stringify(element);

                    // Створюємо текст з символом елемента (H, He, Li...)
                    const symbolText = document.createElement('a-text');
                    symbolText.setAttribute('value', element.symbol);
                    symbolText.setAttribute('align', 'center');
                    symbolText.setAttribute('position', '0 0 0.6'); // Трохи попереду кубика
                    symbolText.setAttribute('color', '#000');
                    symbolText.setAttribute('width', 4);

                    // Додаємо текст до кубика, а кубик - до сцени
                    box.appendChild(symbolText);
                    sceneEl.appendChild(box);
                });

                // --- ЛОГІКА КЛІКУ ---
                // Додаємо слухач подій: що робити, коли ми клікаємо на кубик
                sceneEl.addEventListener('click', function(event) {
                    // Перевіряємо, чи ми клікнули саме на кубик з даними
                    if (event.target.dataset.elementInfo) {
                        const info = JSON.parse(event.target.dataset.elementInfo);
                        
                        // Знаходимо наші текстові поля на UI-панелі
                        const titleEl = document.getElementById('element-title');
                        const infoEl = document.getElementById('element-info');
                        const mlEl = document.getElementById('ml-prediction');
                        
                        // Виводимо інформацію про елемент
                        titleEl.setAttribute('value', `${info.number}. ${info.name} (${info.symbol})`);
                        infoEl.setAttribute('value', `Atomic Mass: ${info.mass}\nGroup: ${info.group.replace(/-/g, ' ')}`);
                        
                        // Робимо "прогноз" за допомогою нашої ML-функції
                        const prediction = predictBoilingPoint(info.number);
                        mlEl.setAttribute('value', `ML Prediction (Boiling Point): ~${prediction} K`);
                    }
                });
            }
        });
    </script>
</body>
</html>
